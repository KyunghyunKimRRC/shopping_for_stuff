<!DOCTYPE html>
<html>
  <head>
    <title>ShoppingForStuff</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link rel="stylesheet" href="https://unpkg.com/mvp.css">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbo-track': 'reload' %>

  </head>

  <body>

    <main>
    <%= debug session[:shopping_cart] %>
    <%= debug cart %>
    <p>You have added <%= pluralize cart, 'product' %> to the shopping cart</p>
      <% if flash[:notice] %>
        <p>
          <%= flash[:notice]%>
        </p>
      <% end %>
      <nav>

        <ul>
          <li>
            Cart
              <% if cart.present? %>
                <sup>
                  <%= cart.size %>
                  <ul>
                    <% cart.each do | product |%>
                      <li class="font-color">
                        <%= product.name %><%= link_to '-', cart_path(product), method: :delete %>
                      </li>
                    <% end %>

                  </ul>
                </sup>
              <% end %>
          </li>
        </ul>
      </nav>
      <%= yield %>
    </main>
    <footer>
      <details>
          <summary>
            Cart
            <% if cart.present? %>
            <ul>
              <sup>
                <%= cart.size %>
              </sup>
          </summary>
          <% cart.each do |p| %>
            <li>
              <%= p.name %><%= link_to 'x', cart_path(p), method: :delete %>
            </li>
          <% end %>
        </ul>
        <% else  %>
          <p>No items in your cart. </p>
        <% end %>
      </details>
      <hr>

      <p><span>üêê</span> Goats in Coats <span>üß•</span> - Copywrong <%= Time.current.year %></p>
    </footer>
  </body>
</html>
